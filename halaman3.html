<!DOCTYPE html>
<html>
<head>
  <title>Untuk Yaya üíú</title>

  <link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@500;700&family=Quicksand:wght@400;600&display=swap" rel="stylesheet">

  <style>
    body{
      margin:0;
      height:100vh;
      background:#e9d5ff;
      display:flex;
      justify-content:center;
      align-items:center;
      flex-direction:column;
      overflow:hidden;
      font-family:'Quicksand', sans-serif;
    }

    .text-box{
      text-align:center;
      font-family:'Baloo 2', cursive;
      font-size:30px;
      color:#6b21a8;
      width:80%;
      max-width:650px;
      min-height:140px;
      line-height:1.6;
    }

    /* Cursor */
    .cursor{
      display:inline-block;
      width:3px;
      background:#6b21a8;
      animation:blink 1s infinite;
      margin-left:5px;
    }

    @keyframes blink{
      50%{opacity:0;}
    }

    /* MOBIL */
    .car{
      position:absolute;
      bottom:80px;
      left:-300px;
      width:240px;
      cursor:pointer;
    }

    .drive-in{
      animation:driveIn 3s forwards ease;
    }

    @keyframes driveIn{
      from{left:-300px;}
      to{left:calc(50% - 120px);}
    }

    .drive-out{
      animation:driveOut 1.5s forwards ease-in;
    }

    @keyframes driveOut{
      from{left:calc(50% - 120px);}
      to{left:120%;}
    }

    /* VIDEO POPUP */
    .video-popup{
      position:fixed;
      top:0;
      left:0;
      width:100%;
      height:100%;
      background:rgba(0,0,0,0.95);
      display:none;
      justify-content:center;
      align-items:center;
      z-index:10;
    }

    .video-popup video{
      width:90%;
      max-height:90%;
      border-radius:15px;
    }

  </style>
</head>

<body>

  <div class="text-box" id="text"></div>

  <!-- MOBIL MERAH -->
  <img src="https://i.imgur.com/6X12K0P.png" class="car" id="car">

  <!-- AUDIO -->
  <audio id="bgMusic" loop>
    <source src="lagu.mp3" type="audio/mp3">
  </audio>

  <!-- VIDEO -->
  <div class="video-popup" id="videoPopup">
    <video controls id="myVideo">
      <source src="video.mp4" type="video/mp4">
    </video>
  </div>

<script>

  const message = `Happy 6 months, Yaya sayangku.
Aku sayang Yaya, hari ini, besok, dan semoga seterusnya üíúü§ç`;

  let i = 0;
  const speed = 45;

  const textElement = document.getElementById("text");
  const car = document.getElementById("car");
  const popup = document.getElementById("videoPopup");
  const video = document.getElementById("myVideo");
  const music = document.getElementById("bgMusic");

  music.volume = 0.3;

  function typeWriter(){
    if(i < message.length){
      textElement.innerHTML += message.charAt(i);
      i++;
      setTimeout(typeWriter, speed);
    } else {
      car.classList.add("drive-in");
      music.play().catch(()=>{});
    }
  }

  window.onload = typeWriter;

  function fadeOutMusic(){
    let fade = setInterval(()=>{
      if(music.volume > 0.05){
        music.volume -= 0.05;
      } else {
        clearInterval(fade);
        music.pause();
      }
    },100);
  }

  function fadeInMusic(){
    music.volume = 0;
    music.play();
    let fade = setInterval(()=>{
      if(music.volume < 0.3){
        music.volume += 0.05;
      } else {
        clearInterval(fade);
      }
    },100);
  }

  car.addEventListener("click", function(){
    car.classList.remove("drive-in");
    car.classList.add("drive-out");

    fadeOutMusic();

    setTimeout(()=>{
      popup.style.display="flex";
      video.play();
    },1200);
  });

  popup.addEventListener("click", function(){
    video.pause();
    popup.style.display="none";
    fadeInMusic();
  });

</script>

</body>
</html>
